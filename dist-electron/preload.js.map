{"version":3,"file":"preload.js","sources":["../src/preload.ts"],"sourcesContent":["import { contextBridge, ipcRenderer, type IpcRendererEvent } from \"electron\";\r\n\r\ntype ProxyHealth = {\n  ok: boolean;\n  message: string;\n};\n\ncontextBridge.exposeInMainWorld(\"electron\", {\n  secureStorage: {\n    isAvailable: () => ipcRenderer.invoke(\"secretStore:isAvailable\") as Promise<boolean>,\n    get: (key: string) => ipcRenderer.invoke(\"secretStore:get\", key) as Promise<string | null>,\n    set: (key: string, value: string) =>\n      ipcRenderer.invoke(\"secretStore:set\", key, value) as Promise<boolean>,\n    remove: (key: string) => ipcRenderer.invoke(\"secretStore:remove\", key) as Promise<boolean>,\n  },\n});\n\ncontextBridge.exposeInMainWorld(\"secureProxy\", {\n  applyProxy: (payload: { proxyUrl: string; enabled: boolean; allowRemote: boolean }) =>\n    ipcRenderer.invoke(\"proxy:apply\", payload) as Promise<void>,\n  checkProxy: () => ipcRenderer.invoke(\"proxy:check\") as Promise<ProxyHealth>,\r\n});\r\n\r\ncontextBridge.exposeInMainWorld(\"onion\", {\r\n  install: (payload: { network: \"tor\" | \"lokinet\" }) =>\r\n    ipcRenderer.invoke(\"onion:install\", payload) as Promise<void>,\r\n  uninstall: (payload: { network: \"tor\" | \"lokinet\" }) =>\r\n    ipcRenderer.invoke(\"onion:uninstall\", payload) as Promise<void>,\r\n  setMode: (payload: { enabled: boolean; network: \"tor\" | \"lokinet\" }) =>\r\n    ipcRenderer.invoke(\"onion:setMode\", payload) as Promise<void>,\r\n  status: () => ipcRenderer.invoke(\"onion:status\") as Promise<unknown>,\r\n  checkUpdates: () => ipcRenderer.invoke(\"onion:checkUpdates\") as Promise<unknown>,\r\n  applyUpdate: (payload: { network: \"tor\" | \"lokinet\" }) =>\r\n    ipcRenderer.invoke(\"onion:applyUpdate\", payload) as Promise<void>,\r\n  onProgress: (cb: (payload: unknown) => void) => {\r\n    const handler = (_event: IpcRendererEvent, payload: unknown) => cb(payload);\r\n    ipcRenderer.on(\"onion:progress\", handler);\r\n    return () => ipcRenderer.removeListener(\"onion:progress\", handler);\r\n  },\r\n});\r\n"],"names":["contextBridge","ipcRenderer"],"mappings":";;AAOAA,SAAAA,cAAc,kBAAkB,YAAY;AAAA,EAC1C,eAAe;AAAA,IACb,aAAa,MAAMC,SAAAA,YAAY,OAAO,yBAAyB;AAAA,IAC/D,KAAK,CAAC,QAAgBA,SAAAA,YAAY,OAAO,mBAAmB,GAAG;AAAA,IAC/D,KAAK,CAAC,KAAa,UACjBA,SAAAA,YAAY,OAAO,mBAAmB,KAAK,KAAK;AAAA,IAClD,QAAQ,CAAC,QAAgBA,SAAAA,YAAY,OAAO,sBAAsB,GAAG;AAAA,EAAA;AAEzE,CAAC;AAEDD,SAAAA,cAAc,kBAAkB,eAAe;AAAA,EAC7C,YAAY,CAAC,YACXC,SAAAA,YAAY,OAAO,eAAe,OAAO;AAAA,EAC3C,YAAY,MAAMA,qBAAY,OAAO,aAAa;AACpD,CAAC;AAEDD,SAAAA,cAAc,kBAAkB,SAAS;AAAA,EACvC,SAAS,CAAC,YACRC,SAAAA,YAAY,OAAO,iBAAiB,OAAO;AAAA,EAC7C,WAAW,CAAC,YACVA,SAAAA,YAAY,OAAO,mBAAmB,OAAO;AAAA,EAC/C,SAAS,CAAC,YACRA,SAAAA,YAAY,OAAO,iBAAiB,OAAO;AAAA,EAC7C,QAAQ,MAAMA,SAAAA,YAAY,OAAO,cAAc;AAAA,EAC/C,cAAc,MAAMA,SAAAA,YAAY,OAAO,oBAAoB;AAAA,EAC3D,aAAa,CAAC,YACZA,SAAAA,YAAY,OAAO,qBAAqB,OAAO;AAAA,EACjD,YAAY,CAAC,OAAmC;AAC9C,UAAM,UAAU,CAAC,QAA0B,YAAqB,GAAG,OAAO;AAC1EA,yBAAY,GAAG,kBAAkB,OAAO;AACxC,WAAO,MAAMA,SAAAA,YAAY,eAAe,kBAAkB,OAAO;AAAA,EACnE;AACF,CAAC;"}