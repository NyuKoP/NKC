{"version":3,"file":"preload.js","sources":["../src/preload.ts"],"sourcesContent":["import { contextBridge, ipcRenderer, type IpcRendererEvent } from \"electron\";\r\n\r\ntype ProxyHealth = {\n  ok: boolean;\n  message: string;\n};\n\ncontextBridge.exposeInMainWorld(\"electron\", {\n  secureStorage: {\n    isAvailable: () => ipcRenderer.invoke(\"secretStore:isAvailable\") as Promise<boolean>,\n    get: (key: string) => ipcRenderer.invoke(\"secretStore:get\", key) as Promise<string | null>,\n    set: (key: string, value: string) =>\n      ipcRenderer.invoke(\"secretStore:set\", key, value) as Promise<boolean>,\n    remove: (key: string) => ipcRenderer.invoke(\"secretStore:remove\", key) as Promise<boolean>,\n  },\n});\n\ncontextBridge.exposeInMainWorld(\"secureProxy\", {\n  applyProxy: (payload: { proxyUrl: string; enabled: boolean; allowRemote: boolean }) =>\n    ipcRenderer.invoke(\"proxy:apply\", payload) as Promise<void>,\n  checkProxy: () => ipcRenderer.invoke(\"proxy:check\") as Promise<ProxyHealth>,\r\n});\r\n\r\ncontextBridge.exposeInMainWorld(\"onion\", {\r\n  install: (payload: { network: \"tor\" | \"lokinet\" }) =>\r\n    ipcRenderer.invoke(\"onion:install\", payload) as Promise<void>,\r\n  uninstall: (payload: { network: \"tor\" | \"lokinet\" }) =>\r\n    ipcRenderer.invoke(\"onion:uninstall\", payload) as Promise<void>,\r\n  setMode: (payload: { enabled: boolean; network: \"tor\" | \"lokinet\" }) =>\r\n    ipcRenderer.invoke(\"onion:setMode\", payload) as Promise<void>,\r\n  status: () => ipcRenderer.invoke(\"onion:status\") as Promise<unknown>,\r\n  checkUpdates: () => ipcRenderer.invoke(\"onion:checkUpdates\") as Promise<unknown>,\r\n  applyUpdate: (payload: { network: \"tor\" | \"lokinet\" }) =>\r\n    ipcRenderer.invoke(\"onion:applyUpdate\", payload) as Promise<void>,\r\n  onProgress: (cb: (payload: unknown) => void) => {\r\n    const handler = (_event: IpcRendererEvent, payload: unknown) => cb(payload);\r\n    ipcRenderer.on(\"onion:progress\", handler);\r\n    return () => ipcRenderer.removeListener(\"onion:progress\", handler);\r\n  },\r\n});\r\n"],"names":["contextBridge","ipcRenderer","key","value","payload","cb","handler","_event"],"mappings":"yCAOAA,EAAAA,cAAc,kBAAkB,WAAY,CAC1C,cAAe,CACb,YAAa,IAAMC,EAAAA,YAAY,OAAO,yBAAyB,EAC/D,IAAMC,GAAgBD,EAAAA,YAAY,OAAO,kBAAmBC,CAAG,EAC/D,IAAK,CAACA,EAAaC,IACjBF,EAAAA,YAAY,OAAO,kBAAmBC,EAAKC,CAAK,EAClD,OAASD,GAAgBD,EAAAA,YAAY,OAAO,qBAAsBC,CAAG,CAAA,CAEzE,CAAC,EAEDF,EAAAA,cAAc,kBAAkB,cAAe,CAC7C,WAAaI,GACXH,EAAAA,YAAY,OAAO,cAAeG,CAAO,EAC3C,WAAY,IAAMH,cAAY,OAAO,aAAa,CACpD,CAAC,EAEDD,EAAAA,cAAc,kBAAkB,QAAS,CACvC,QAAUI,GACRH,EAAAA,YAAY,OAAO,gBAAiBG,CAAO,EAC7C,UAAYA,GACVH,EAAAA,YAAY,OAAO,kBAAmBG,CAAO,EAC/C,QAAUA,GACRH,EAAAA,YAAY,OAAO,gBAAiBG,CAAO,EAC7C,OAAQ,IAAMH,EAAAA,YAAY,OAAO,cAAc,EAC/C,aAAc,IAAMA,EAAAA,YAAY,OAAO,oBAAoB,EAC3D,YAAcG,GACZH,EAAAA,YAAY,OAAO,oBAAqBG,CAAO,EACjD,WAAaC,GAAmC,CAC9C,MAAMC,EAAU,CAACC,EAA0BH,IAAqBC,EAAGD,CAAO,EAC1EH,OAAAA,cAAY,GAAG,iBAAkBK,CAAO,EACjC,IAAML,EAAAA,YAAY,eAAe,iBAAkBK,CAAO,CACnE,CACF,CAAC"}